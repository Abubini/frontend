<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>MEMBERSHIP</title>
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="membership.css">
    <link rel="icon" href="logo_top.png" type="image/png" sizes="16x16">
    <script src="https://cdn.jsdelivr.net/npm/jwt-decode/build/jwt-decode.min.js"></script>
    <style>
        .chapaform{
            display:flex;
            flex-direction:column;
            width: 50%;
            justify-content:center;
            align-items:center;
            }
            #chapa-form {
            display:flex;
            flex-direction:column;
            align-items:center;
            gap: 7px;
            width:100%;


        }
        #chapa-form input{
            width:50%;
            height: 3em;
            background-color: rgba(29, 29, 28, 0.3);
            border: none;
            color:white;

            }
            #chapa-form input:hover{
                border: 1px solid white;
                }
            input::placeholder{
	color:white;
	}
          #big{

            display:flex;
            flex-direction:column;
            align-items:center;
            justify-content:center;
            color:white;

            }
            .enroll-button{
                width:25em;
                height:2em;
                background-color: rgba(79, 79, 78, 0.3);
                color:white;
                }


        .goldchapaform{
            display:none;
            }
        #update{
            background-color: rgba(255, 102, 0, 0.6);
            color:white;
        }
        #update:hover{
	background-color: rgba(255, 102, 0, 0.3);

	}

    </style>
</head>
<body>
<header>
    <div class="logo">
        <a href="index.html"><img src="logo_new.png" alt="company logo"></a>
    </div>
    <div class="navs">
        <div class="navigation">
            <a href="index.html">HOME</a>
            <a href="membership.html">MEMBERSHIP</a>
            <a href="classes.html">CLASSES & PROGRAMS</a>
            <a href="blog.html">BLOG</a>
            <a href="about.html">ABOUT US</a>

        </div>
        <div class="nav-container">
   <button class="open-btn" onclick="openNav()">☰</button>
    <nav id="mySidebar" class="sidebar">
            <a href="javascript:void(0)" class="close-btn" onclick="closeNav()">×</a>
            <a href="index.html">HOME</a>
            <a href="membership.html">MEMBERSHIP</a>
            <a href="classes.html">CLASSES & PROGRAMS</a>
            <a href="blog.html">BLOG</a>
            <a href="about.html">ABOUT US</a>
        </nav>
        </div>
        <div class="profile" onclick="personalPage()">
            <img src="profile-image.png" alt="" class="profile-image">
        </div>
    </div>
</header>



<main>
    <section class="main">
        <div class="plans">
            <div class="heading">
            <h1 class="plan" id="plan">plans</h1>
                </div>
            <div class="plan-types" id="hide">
            <div class="gold" id="gold" onclick="updatetogold()">
                <h2>gold</h2>
                <ul class="lists">
                    <li class="list-item">shower</li>
                    <li class="list-item">locker(x large)</li>
                    <li class="list-item">free weight</li>
                    <li class="list-item">ice bath</li>
                    <li class="list-item">full spa</li>
                    <li class="list-item">aerobics</li>
                    <li class="list-item">personal trainer</li>
                    <li class="list-item">indoor pool</li>
                    <li class="list-item">body scan</li>
                    <li class="list-item">yoga</li>
                </ul>

                <p class="price"><b>10,999</b><small>ETB/month</small></p>
            </div>

            <div class="silver" id="silver" onclick="updatetosilver()">
                <h2>silver</h2>
                <ul class="lists">
                    <li class="list-item">shower</li>
                    <li class="list-item">locker</li>
                    <li class="list-item">free weight</li>
                    <li class="list-item">ice bath</li>
                    <li class="list-item">steam</li>
                    <li class="list-item">aerobics</li>
                </ul>
                <p class="price"><b>7,999</b><small>ETB/month</small></p>
            </div>
             <div class="normal" id="normal" onclick="updatetonormal()">
                <h2>normal</h2>
                <ul class="lists">
                    <li class="list-item">shower</li>
                    <li class="list-item">locker</li>
                    <li class="list-item">free weight</li>
                    <li class="list-item">ice bath</li>
                </ul>
                <p class="price"><b>4,999</b> <small>ETB/month</small></p>
            </div>

            </div>
            <div id="big">
             <div class="goldchapaform chapaform" id="chapaForm">
                <h1 class="plan">Your Chapa Payment Credentials</h1><br><br>
                <p class="little-description" >Please enter your Chapa payment credentials below. While it is not mandatory to provide your first name, last name, and phone number, we highly recommend including all these details to ensure a smooth and secure transaction. If you don't already have a Chapa account, you can create one by clicking the link below.</p>b
                <form id="chapa-form">
                    <input type="text" class="long" name="first_name" id="first_name" autocomplete="complete" placeholder="First name" >
                    <input type="text" class="long" name="last_name" id="last_name" autocomplete="complete" placeholder="Last name" >
                    <input type="email" class="long" name="cemail" id="cemail" autocomplete="complete" placeholder="Email" required>
                     <input type="text" class="long" name="phone_number" id="phone_number" autocomplete="complete" placeholder="Phone number">
                    <input type="text" class="long" name="tx_ref" id="tx_ref" autocomplete="complete" placeholder="Your payment reference" required>
                    <p id="message"></p>
                    <button class="enroll-button" type="submit">Pay</button>

                </form>
                 <p>if you don't have a chapa account <a href="https://dashboard.chapa.co/register" target="_blank" style="color:white;">create one here</a></p>

                </div>
                </div>


        </div>
    </section>
    <section class="main">
    <div class="business-plan">
        <h1 class="plan">business plan</h1>
        <p class="business-plan-description">Our gym takes pride in offering an exclusive membership program tailored specifically for companies aiming to enhance the well-being of their employees through fitness initiatives. Our business membership plan provides a customizable approach, allowing companies to select from gold, silver, or normal membership tiers based on their budget and the fitness needs of their workforce. Moreover, companies have the flexibility to determine the number of employees they wish to enroll, ensuring that the program aligns precisely with their organizational requirements.

        The enrollment process is simple and efficient, starting with a brief form where companies outline their preferred membership tier and specify the number of employees to be covered. Upon submission of this form, a unique access code is promptly generated, tailored to the specified number of employees. This code serves as a seamless gateway for employees to register under their company's membership umbrella, facilitating easy authentication and association with the designated membership plan.

        To maintain service quality and fairness for all members, registration using a company's access code is capped at the predetermined number of employees indicated during enrollment. Once this limit is reached, further registrations under the same code are respectfully closed, ensuring optimal access and experience for all participants.

        The benefits of our business membership program extend beyond just access to premium gym facilities. By empowering employees with fitness opportunities, companies can cultivate a culture of well-being within their organization, leading to increased productivity, morale, and overall satisfaction. Additionally, our streamlined enrollment and management processes make it effortless for companies to administer and track employee memberships, saving valuable time and resources.</p>
        <div class="business-plan-button-container" style="display:flex; gap: 30px;">
        <button class="business-plan-button" onclick="businessForm() ">make Enrollment</button>
            <button class="business-plan-button" id="update" onclick="updateForm() ">update plan</button>
            </div>
    </div>
        </section>
</main>



<footer>
        <div class="upper">
                <div class="social">
                    <a href="https://facebook.com" target="_blank"><i class="fab fa-facebook"></i></a>
                    <a href="https://instagram.com" target="_blank"><i class="fab fa-instagram"></i></a>
                    <a href="https://twitter.com" target="_blank"><i class="fab fa-twitter"></i></a>
                    <a href="https://youtube.com" target="_blank"><i class="fab fa-youtube"></i></a>
                    <a href="https://tiktok.com" target="_blank"><i class="fab fa-tiktok"></i></a>
                    <a href="tel:+1234567890" title="Call Us"><i class="fas fa-phone"></i></a>
                    <a href="mailto:contact@example.com" title="Email Us"><i class="fas fa-envelope"></i></a>
                </div>

                <div class="rate-us">
                    <div class="rating">
                        <span onclick="gfg(1)" class="star">★</span>
                        <span onclick="gfg(2)" class="star">★</span>
                        <span onclick="gfg(3)" class="star">★</span>
                        <span onclick="gfg(4)" class="star">★</span>
                        <span onclick="gfg(5)" class="star">★</span>
                    </div>
                    <h3 id="output">Rating is: 0/5</h3>
                </div>
                </div>
            <div class="image-container">
                <a href="https://maps.app.goo.gl/tLcQf5AJhzvTwART6" target="_blank">
                    <img src="gym-map.png" alt="Placeholder Image" class="image" />
                </a>
            </div>






            <div class="footer-text">
                <p>&copy 2024 Yared Kiros, Biniam , Estifanos , Simon ,Yeabsira Addis, All Rights Reserved | AAU SITE </p>
            </div>
    </footer>
<script>
        function openNav() {
        document.getElementById("mySidebar").style.width = "250px";
    }

    function closeNav() {
        document.getElementById("mySidebar").style.width = "0";
    }
        function personalPage() {
            window.location.href = 'personal.html';
        }
        const stars = document.getElementsByClassName("star");
        const output = document.getElementById("output");

        function gfg(n) {

            remove();

            for (let i = 0; i < n; i++) {
                let cls = ["one", "two", "three", "four", "five"][n - 1];
                stars[i].className = "star " + cls;
            }

            output.innerText = "Rating is: " + n + "/5";
        }

        function remove() {
            for (let i = 0; i < 5; i++) {
                stars[i].className = "star";
            }
        }
    function businessForm() {
            window.location.href = 'bm-form.html';
        }
    function updateForm() {
            window.location.href = 'update_member.html';
        }





   async function updateMembership(membershiptype) {
   const token = sessionStorage.getItem('token');
    if (!token) {
      window.location.href = 'login.html';
      return;
    }
    const response1 = await fetch('https://vigorgym.onrender.com/users/account', {
      method: 'GET',
      headers: {
        'Authorization': `Bearer ${token}`,
      },
    });
    const accountInfo = await response1.json();

    const email = accountInfo.email;
    document.getElementById('hide').classList.add('goldchapaform');
    document.getElementById('chapaForm').classList.remove('goldchapaform');
    document.getElementById('plan').style.display = 'none';

    const registrationForm = document.getElementById('chapa-form');

    registrationForm.addEventListener('submit', async function(e) {
        e.preventDefault();

        const cemail = document.getElementById('cemail').value;
        const first_name = document.getElementById('first_name').value;
        const last_name = document.getElementById('last_name').value;
        const phone_number = document.getElementById('phone_number').value;
        const tx_ref = document.getElementById('tx_ref').value;



        try {
            const response = await fetch(`https://vigorgym.onrender.com/users/buymembership/${email}`, {
                method: 'PUT',
                headers: {
                    'Authorization': `Bearer ${token}`,
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({

                    membershiptype,
                    first_name,
                    last_name,
                    phone_number,
                    tx_ref,
                    cemail
                }),
            });

            const data = await response.json();

            if (data.success) {
                document.getElementById('message').innerText = 'Registration successful!';
            } else {
                throw new Error(data.message);
            }
        } catch (error) {
            document.getElementById('message').innerText = error.message;
        }
    });
}

async function updatetogold() {
    await updateMembership('gold');
}

async function updatetosilver() {
    await updateMembership('silver');
}

async function updatetonormal() {
    await updateMembership('normal');
}


    </script>
</body>
</html>